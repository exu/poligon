<div class="body">
            
  <div class="section" id="exercise-15-reading-files">
<h1>Exercise 15: Reading Files<a class="headerlink" href="#exercise-15-reading-files" title="Permalink to this headline">¶</a>
</h1>
<p>Everything you've learned about <tt class="docutils literal"><span class="pre">STDIN.gets</span></tt> and <tt class="docutils literal"><span class="pre">ARGV</span></tt> is so you
can start reading files. You may have to play with this exercise the
most to understand what's going on, so do it carefully and remember your
checks. Working with files is an easy way to erase your work if you are
not careful.</p>
<p>This exercise involves writing two files. One is your usual <tt class="docutils literal"><span class="pre">ex15.rb</span></tt>
file that you will run, but the other is named <tt class="docutils literal"><span class="pre">ex15_sample.txt</span></tt>. This
second file isn't a script but a plain text file we'll be reading in our
script. Here are the contents of that file:</p>
<div class="highlight-console">
<div class="highlight"><pre><span class="go">This is stuff I typed into a file.</span>
<span class="go">It is really cool stuff.</span>
<span class="go">Lots and lots of fun to have in here.</span>
</pre></div>
</div>
<p>What we want to do is "open" that file in our script and print it out.
However, we do not want to just "hard code" the name <tt class="docutils literal"><span class="pre">ex15_sample.txt</span></tt>
into our script. "Hard coding" means putting some bit of information
that should come from the user as a string right in our program. That's
bad because we want it to load other files later. The solution is to use
<tt class="docutils literal"><span class="pre">ARGV</span></tt> and <tt class="docutils literal"><span class="pre">STDIN.gets</span></tt> to ask the user what file they want instead
of "hard coding" the file's name.</p>
<div class="highlight-ruby"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">filename</span> <span class="o">=</span> <span class="no">ARGV</span><span class="o">.</span><span class="n">first</span>

<span class="n">prompt</span> <span class="o">=</span> <span class="s2">"&gt; "</span>
<span class="n">txt</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"Here's your file: </span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2">"</span>
<span class="nb">puts</span> <span class="n">txt</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="nb">puts</span> <span class="s2">"Type the filename again:"</span>
<span class="nb">print</span> <span class="n">prompt</span>
<span class="n">file_again</span> <span class="o">=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

<span class="n">txt_again</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_again</span><span class="p">)</span>

<span class="nb">puts</span> <span class="n">txt_again</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</td>
</tr></table></div>
<p>A few fancy things are going on in this file, so let's break it down
real quick:</p>
<p>Line 1-3 should be a familiar use of <tt class="docutils literal"><span class="pre">ARGV</span></tt> to get a filename and
setting up the prompt. Next we have line 4 where we use a new command
<tt class="docutils literal"><span class="pre">File.open</span></tt>. Right now, run <tt class="docutils literal"><span class="pre">ri</span> <span class="pre">File.open</span></tt> from the command line and
read the instructions. Notice how like your own scripts, it takes a
parameter and returns a value you can set to your own variable. You just
opened a file.</p>
<p>Line 6 we print a little line, but on line 7 we have something very new
and exciting. We call a function on <tt class="docutils literal"><span class="pre">txt</span></tt>. What you got back from
<tt class="docutils literal"><span class="pre">open</span></tt> is a <tt class="docutils literal"><span class="pre">file</span></tt>, and it's also got commands you can give it. You
give a file a command by using the <tt class="docutils literal"><span class="pre">.</span></tt> (dot or period), the name of
the command, and parameters. Just like with <tt class="docutils literal"><span class="pre">File.open</span></tt>. The
difference is that when you say <tt class="docutils literal"><span class="pre">txt.read()</span></tt> you are saying, "Hey txt!
Do your read command with no parameters!"</p>
<p>The remainder of the file is more of the same, but we'll leave the
analysis to you in the extra credit.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="#what-you-should-see" title="Permalink to this headline">¶</a>
</h2>
<p>I made a file called "ex15_sample.txt" and ran my script.</p>
<div class="highlight-console">
<div class="highlight"><pre><span class="gp">$</span> ruby ex15.rb ex15_sample.txt
<span class="go">Here's your file 'ex15_sample.txt':</span>
<span class="go">This is stuff I typed into a file.</span>
<span class="go">It is really cool stuff.</span>
<span class="go">Lots and lots of fun to have in here.</span>

<span class="go">I'll also ask you to type it again:</span>
<span class="gp">&gt;</span> ex15_sample.txt
<span class="go">This is stuff I typed into a file.</span>
<span class="go">It is really cool stuff.</span>
<span class="go">Lots and lots of fun to have in here.</span>

<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="#extra-credit" title="Permalink to this headline">¶</a>
</h2>
<p>This is a big jump so be sure you do this extra credit as best you can
before moving on.</p>
<ol class="arabic simple">
<li>Above each line write out in English what that line does.</li>
<li>If you are not sure ask someone for help or search online. Many times
searching for "ruby THING" will find answers for what that THING does
in Ruby. Try searching for "ruby file.open".</li>
<li>I used the name "commands" here, but they are also called "functions"
and "methods". Search around online to see what other people do to
define these. Do not worry if they confuse you. It's normal for a
programmer to confuse you with their vast extensive knowledge.</li>
<li>Get rid of the part from line 9-15 where you use <tt class="docutils literal"><span class="pre">STDIN.gets</span></tt> and
try the script then.</li>
<li>Use only <tt class="docutils literal"><span class="pre">STDIN.gets</span></tt> and try the script that way. Think of why one
way of getting the filename would be better than another.</li>
<li>Run <tt class="docutils literal"><span class="pre">ri</span> <span class="pre">File</span></tt> and scroll down until you see the <tt class="docutils literal"><span class="pre">read()</span></tt> command
(method/function). See all the other ones you can use? Try some of
the other commands.</li>
<li>Startup IRB again and use <tt class="docutils literal"><span class="pre">File.open</span></tt> from the prompt. Notice how
you can open files and run read on them right there?</li>
<li>Have your script also do a <tt class="docutils literal"><span class="pre">close()</span></tt> on the <tt class="docutils literal"><span class="pre">txt</span></tt> and
<tt class="docutils literal"><span class="pre">txt_again</span></tt> variables. It's important to close files when you are
done with them.</li>
</ol>
</div>
</div>


          </div>