<div class="body">
            
  <div class="section" id="exercise-41-gothons-from-planet-percal-25">
<h1>Exercise 41: Gothons From Planet Percal #25<a class="headerlink" href="#exercise-41-gothons-from-planet-percal-25" title="Permalink to this headline">Â¶</a>
</h1>
<p>Did you figure out the secret of the method in the hash from the last
exercise? Can you explain it to yourself? I'll explain it and you can
compare your explanation with mine. Here are the lines of code we are
talking about:</p>
<div class="highlight-ruby">
<div class="highlight"><pre><span class="n">cities</span><span class="o">[</span><span class="ss">:find</span><span class="o">]</span> <span class="o">=</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:find</span><span class="p">\</span><span class="n">_city</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">cities</span><span class="o">[</span><span class="ss">:find</span><span class="o">].</span><span class="n">call</span><span class="p">(</span><span class="n">cities</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
</pre></div>
</div>
<p>Remember that code can be stored in variables too. In order to store a
block of code in a variable, we create something called a <tt class="docutils literal"><span class="pre">proc</span></tt>,
which is short for procedure. In this code, first we are calling Ruby's
built-in method called <tt class="docutils literal"><span class="pre">method</span></tt>, which returns a proc version of the
<tt class="docutils literal"><span class="pre">find_city</span></tt> method, which we then store in the hash <tt class="docutils literal"><span class="pre">cities</span></tt> with
the key <tt class="docutils literal"><span class="pre">:find</span></tt>. This is the same as all the others where we set
states to some cities, but in this case it's actually the proc.</p>
<p>Alright, so once we know that <tt class="docutils literal"><span class="pre">find_city</span></tt> is in the hash at <tt class="docutils literal"><span class="pre">:find</span></tt>,
that means we can do work with it. The 2nd line of code (used later in
the previous exercise) can be broken down like this:</p>
<ol class="arabic simple">
<li>Ruby reads <tt class="docutils literal"><span class="pre">cities</span></tt> and finds that variable, it's a <tt class="docutils literal"><span class="pre">hash</span></tt>.</li>
<li>Then there's <tt class="docutils literal"><span class="pre">[:find]</span></tt> which will index into the cities hash and
pull out whatever is at <tt class="docutils literal"><span class="pre">:find</span></tt>.</li>
<li>What is at <tt class="docutils literal"><span class="pre">[:find]</span></tt> is our proc <tt class="docutils literal"><span class="pre">find_city</span></tt> so Ruby then knows
it's got a proc, and when it hits <tt class="docutils literal"><span class="pre">.call</span></tt> it calls the proc code.</li>
<li>The parameters <tt class="docutils literal"><span class="pre">cities</span></tt>, <tt class="docutils literal"><span class="pre">state</span></tt> are passed to the proc
<tt class="docutils literal"><span class="pre">find_city</span></tt>, and it runs because it's called.</li>
<li>
<tt class="docutils literal"><span class="pre">find_city</span></tt> then tries to look up <tt class="docutils literal"><span class="pre">states</span></tt> inside <tt class="docutils literal"><span class="pre">cities</span></tt>, and
returns what it finds or a message saying it didn't find anything.</li>
<li>Ruby takes what <tt class="docutils literal"><span class="pre">find_city</span></tt> returned, and prints it out using the
<tt class="docutils literal"><span class="pre">puts</span></tt> method we've been using all along.</li>
</ol>
<p>Here's a trick. Sometimes these things read better in English if you
read the code backwards. This is how I would do it for that same line
(remember backwards):</p>
<ol class="arabic simple">
<li>
<tt class="docutils literal"><span class="pre">state</span></tt> and <tt class="docutils literal"><span class="pre">city</span></tt> are...</li>
<li>passed as parameters to...</li>
<li>a proc at...</li>
<li>
<tt class="docutils literal"><span class="pre">:find</span></tt> inside...</li>
<li>the hash <tt class="docutils literal"><span class="pre">cities</span></tt>...</li>
<li>and finally printed on the screen</li>
</ol>
<p>Here's another way to read it, this time "inside-out".</p>
<ol class="arabic simple">
<li>Find the center item of the expression, in this case <tt class="docutils literal"><span class="pre">[:find]</span></tt>.</li>
<li>Go counter-clock-wise and you have a hash <tt class="docutils literal"><span class="pre">cities</span></tt>, so this finds
the element <tt class="docutils literal"><span class="pre">:find</span></tt> in <tt class="docutils literal"><span class="pre">cities</span></tt>.</li>
<li>That gives us a proc. Keep going counter-clock-wise and you get to
the parameters.</li>
<li>The parameters are passed to the proc, and that returns a result. Go
counter-clock-wise again.</li>
<li>Finally, we are at the <tt class="docutils literal"><span class="pre">puts</span></tt> statement, and we have our end
result.</li>
</ol>
<p>After decades of programming I don't even think about these three ways
to read code. I just glance at it and know what it means. I can even
glance at a whole screen of code, and all the bugs and errors jump out
at me. That took an incredibly long time and quite a bit more study than
is sane. To get that way, I learned these three ways of reading most any
programming language:</p>
<ol class="arabic simple">
<li>Front to back.</li>
<li>Back to front.</li>
<li>Counter-clock-wise.</li>
</ol>
<p>Try them out when you have a difficult statement to figure out.</p>
<p>Now type in your next exercise, then go over it. This one is gonna be
fun.</p>
<div class="highlight-ruby"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="k">def</span> <span class="nf">prompt</span><span class="p">()</span>
  <span class="nb">print</span> <span class="s2">"&gt; "</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">death</span><span class="p">()</span>
  <span class="n">quips</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"You died.  You kinda suck at this."</span><span class="p">,</span>
    <span class="s2">"Nice job, you died ...jackass."</span><span class="p">,</span>
    <span class="s2">"Such a luser."</span><span class="p">,</span>
    <span class="s2">"I have a small puppy that's better at this."</span><span class="o">]</span>
  <span class="nb">puts</span> <span class="n">quips</span><span class="o">[</span><span class="nb">rand</span><span class="p">(</span><span class="n">quips</span><span class="o">.</span><span class="n">length</span><span class="p">())</span><span class="o">]</span>
  <span class="no">Process</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">central_corridor</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"The Gothons of Planet Percal #25 have invaded your ship and destroyed"</span>
  <span class="nb">puts</span> <span class="s2">"your entire crew.  You are the last surviving member and your last"</span>
  <span class="nb">puts</span> <span class="s2">"mission is to get the neutron destruct bomb from the Weapons Armory,"</span>
  <span class="nb">puts</span> <span class="s2">"put it in the bridge, and blow the ship up after getting into an "</span>
  <span class="nb">puts</span> <span class="s2">"escape pod."</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span>
  <span class="nb">puts</span> <span class="s2">"You're running down the central corridor to the Weapons Armory when"</span>
  <span class="nb">puts</span> <span class="s2">"a Gothon jumps out, red scaly skin, dark grimy teeth, and evil clown costume"</span>
  <span class="nb">puts</span> <span class="s2">"flowing around his hate filled body.  He's blocking the door to the"</span>
  <span class="nb">puts</span> <span class="s2">"Armory and about to pull a weapon to blast you."</span>

  <span class="n">prompt</span><span class="p">()</span>
  <span class="n">action</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

  <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"shoot!"</span>
    <span class="nb">puts</span> <span class="s2">"Quick on the draw you yank out your blaster and fire it at the Gothon."</span>
    <span class="nb">puts</span> <span class="s2">"His clown costume is flowing and moving around his body, which throws"</span>
    <span class="nb">puts</span> <span class="s2">"off your aim.  Your laser hits his costume but misses him entirely.  This"</span>
    <span class="nb">puts</span> <span class="s2">"completely ruins his brand new costume his mother bought him, which"</span>
    <span class="nb">puts</span> <span class="s2">"makes him fly into an insane rage and blast you repeatedly in the face until"</span>
    <span class="nb">puts</span> <span class="s2">"you are dead.  Then he eats you."</span>
    <span class="k">return</span> <span class="ss">:death</span>

  <span class="k">elsif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"dodge!"</span>
    <span class="nb">puts</span> <span class="s2">"Like a world class boxer you dodge, weave, slip and slide right"</span>
    <span class="nb">puts</span> <span class="s2">"as the Gothon's blaster cranks a laser past your head."</span>
    <span class="nb">puts</span> <span class="s2">"In the middle of your artful dodge your foot slips and you"</span>
    <span class="nb">puts</span> <span class="s2">"bang your head on the metal wall and pass out."</span>
    <span class="nb">puts</span> <span class="s2">"You wake up shortly after only to die as the Gothon stomps on"</span>
    <span class="nb">puts</span> <span class="s2">"your head and eats you."</span>
    <span class="k">return</span> <span class="ss">:death</span>

  <span class="k">elsif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"tell a joke"</span>
    <span class="nb">puts</span> <span class="s2">"Lucky for you they made you learn Gothon insults in the academy."</span>
    <span class="nb">puts</span> <span class="s2">"You tell the one Gothon joke you know:"</span>
    <span class="nb">puts</span> <span class="s2">"Lbhe zbgure vf fb sng, jura fur fvgf nebhaq gur ubhfr, fur fvgf nebhaq gur ubhfr."</span>
    <span class="nb">puts</span> <span class="s2">"The Gothon stops, tries not to laugh, then busts out laughing and can't move."</span>
    <span class="nb">puts</span> <span class="s2">"While he's laughing you run up and shoot him square in the head"</span>
    <span class="nb">puts</span> <span class="s2">"putting him down, then jump through the Weapon Armory door."</span>
    <span class="k">return</span> <span class="ss">:laser_weapon_armory</span>

  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"DOES NOT COMPUTE!"</span>
    <span class="k">return</span> <span class="ss">:central_corridor</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">laser_weapon_armory</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"You do a dive roll into the Weapon Armory, crouch and scan the room"</span>
  <span class="nb">puts</span> <span class="s2">"for more Gothons that might be hiding.  It's dead quiet, too quiet."</span>
  <span class="nb">puts</span> <span class="s2">"You stand up and run to the far side of the room and find the"</span>
  <span class="nb">puts</span> <span class="s2">"neutron bomb in its container.  There's a keypad lock on the box"</span>
  <span class="nb">puts</span> <span class="s2">"and you need the code to get the bomb out.  If you get the code"</span>
  <span class="nb">puts</span> <span class="s2">"wrong 10 times then the lock closes forever and you can't"</span>
  <span class="nb">puts</span> <span class="s2">"get the bomb.  The code is 3 digits."</span>
  <span class="n">code</span> <span class="o">=</span> <span class="s2">"%s%s%s"</span> <span class="o">%</span> <span class="o">[</span><span class="nb">rand</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="o">]</span>
  <span class="nb">print</span> <span class="s2">"[keypad]&gt; "</span>
  <span class="n">guess</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>
  <span class="n">guesses</span> <span class="o">=</span> <span class="mi">0</span>

  <span class="k">while</span> <span class="n">guess</span> <span class="o">!=</span> <span class="n">code</span> <span class="ow">and</span> <span class="n">guesses</span> <span class="o">&lt;</span> <span class="mi">10</span>
    <span class="nb">puts</span> <span class="s2">"BZZZZEDDD!"</span>
    <span class="n">guesses</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="nb">print</span> <span class="s2">"[keypad]&gt; "</span>
    <span class="n">guess</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>
  <span class="k">end</span>

  <span class="k">if</span> <span class="n">guess</span> <span class="o">==</span> <span class="n">code</span>
    <span class="nb">puts</span> <span class="s2">"The container clicks open and the seal breaks, letting gas out."</span>
    <span class="nb">puts</span> <span class="s2">"You grab the neutron bomb and run as fast as you can to the"</span>
    <span class="nb">puts</span> <span class="s2">"bridge where you must place it in the right spot."</span>
    <span class="k">return</span> <span class="ss">:the_bridge</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"The lock buzzes one last time and then you hear a sickening"</span>
    <span class="nb">puts</span> <span class="s2">"melting sound as the mechanism is fused together."</span>
    <span class="nb">puts</span> <span class="s2">"You decide to sit there, and finally the Gothons blow up the"</span>
    <span class="nb">puts</span> <span class="s2">"ship from their ship and you die."</span>
    <span class="k">return</span> <span class="ss">:death</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">the_bridge</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"You burst onto the Bridge with the netron destruct bomb"</span>
  <span class="nb">puts</span> <span class="s2">"under your arm and surprise 5 Gothons who are trying to"</span>
  <span class="nb">puts</span> <span class="s2">"take control of the ship.  Each of them has an even uglier"</span>
  <span class="nb">puts</span> <span class="s2">"clown costume than the last.  They haven't pulled their"</span>
  <span class="nb">puts</span> <span class="s2">"weapons out yet, as they see the active bomb under your"</span>
  <span class="nb">puts</span> <span class="s2">"arm and don't want to set it off."</span>

  <span class="n">prompt</span><span class="p">()</span>
  <span class="n">action</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

  <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"throw the bomb"</span>
    <span class="nb">puts</span> <span class="s2">"In a panic you throw the bomb at the group of Gothons"</span>
    <span class="nb">puts</span> <span class="s2">"and make a leap for the door.  Right as you drop it a"</span>
    <span class="nb">puts</span> <span class="s2">"Gothon shoots you right in the back killing you."</span>
    <span class="nb">puts</span> <span class="s2">"As you die you see another Gothon frantically try to disarm"</span>
    <span class="nb">puts</span> <span class="s2">"the bomb. You die knowing they will probably blow up when"</span>
    <span class="nb">puts</span> <span class="s2">"it goes off."</span>
    <span class="k">return</span> <span class="ss">:death</span>

  <span class="k">elsif</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">"slowly place the bomb"</span>
    <span class="nb">puts</span> <span class="s2">"You point your blaster at the bomb under your arm"</span>
    <span class="nb">puts</span> <span class="s2">"and the Gothons put their hands up and start to sweat."</span>
    <span class="nb">puts</span> <span class="s2">"You inch backward to the door, open it, and then carefully"</span>
    <span class="nb">puts</span> <span class="s2">"place the bomb on the floor, pointing your blaster at it."</span>
    <span class="nb">puts</span> <span class="s2">"You then jump back through the door, punch the close button"</span>
    <span class="nb">puts</span> <span class="s2">"and blast the lock so the Gothons can't get out."</span>
    <span class="nb">puts</span> <span class="s2">"Now that the bomb is placed you run to the escape pod to"</span>
    <span class="nb">puts</span> <span class="s2">"get off this tin can."</span>
    <span class="k">return</span> <span class="ss">:escape_pod</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"DOES NOT COMPUTE!"</span>
    <span class="k">return</span> <span class="ss">:the_bridge</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">escape_pod</span><span class="p">()</span>
  <span class="nb">puts</span> <span class="s2">"You rush through the ship desperately trying to make it to"</span>
  <span class="nb">puts</span> <span class="s2">"the escape pod before the whole ship explodes.  It seems like"</span>
  <span class="nb">puts</span> <span class="s2">"hardly any Gothons are on the ship, so your run is clear of"</span>
  <span class="nb">puts</span> <span class="s2">"interference.  You get to the chamber with the escape pods, and"</span>
  <span class="nb">puts</span> <span class="s2">"now need to pick one to take.  Some of them could be damaged"</span>
  <span class="nb">puts</span> <span class="s2">"but you don't have time to look.  There's 5 pods, which one"</span>
  <span class="nb">puts</span> <span class="s2">"do you take?"</span>

  <span class="n">good_pod</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span> 
  <span class="nb">print</span> <span class="s2">"[pod #]&gt;"</span>
  <span class="n">guess</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="p">()</span>

  <span class="k">if</span> <span class="n">guess</span><span class="o">.</span><span class="n">to_i</span> <span class="o">!=</span> <span class="n">good_pod</span>
    <span class="nb">puts</span> <span class="s2">"You jump into pod %s and hit the eject button."</span> <span class="o">%</span> <span class="n">guess</span>
    <span class="nb">puts</span> <span class="s2">"The pod escapes out into the void of space, then"</span>
    <span class="nb">puts</span> <span class="s2">"implodes as the hull ruptures, crushing your body"</span>
    <span class="nb">puts</span> <span class="s2">"into jam jelly."</span>
    <span class="k">return</span> <span class="ss">:death</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"You jump into pod %s and hit the eject button."</span> <span class="o">%</span> <span class="n">guess</span>
    <span class="nb">puts</span> <span class="s2">"The pod easily slides out into space heading to"</span>
    <span class="nb">puts</span> <span class="s2">"the planet below.  As it flies to the planet, you look"</span>
    <span class="nb">puts</span> <span class="s2">"back and see your ship implode then explode like a"</span>
    <span class="nb">puts</span> <span class="s2">"bright star, taking out the Gothon ship at the same"</span>
    <span class="nb">puts</span> <span class="s2">"time.  You won!"</span>
    <span class="no">Process</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">ROOMS</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:death</span> <span class="o">=&gt;</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:death</span><span class="p">),</span>
  <span class="ss">:central_corridor</span> <span class="o">=&gt;</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:central_corridor</span><span class="p">),</span>
  <span class="ss">:laser_weapon_armory</span> <span class="o">=&gt;</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:laser_weapon_armory</span><span class="p">),</span>
  <span class="ss">:the_bridge</span> <span class="o">=&gt;</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:the_bridge</span><span class="p">),</span>
  <span class="ss">:escape_pod</span> <span class="o">=&gt;</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:escape_pod</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">def</span> <span class="nf">runner</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>
  <span class="n">next_one</span> <span class="o">=</span> <span class="n">start</span>

  <span class="k">while</span> <span class="kp">true</span>
    <span class="n">room</span> <span class="o">=</span> <span class="n">map</span><span class="o">[</span><span class="n">next_one</span><span class="o">]</span>
    <span class="nb">puts</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">--------"</span>
    <span class="n">next_one</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">runner</span><span class="p">(</span><span class="no">ROOMS</span><span class="p">,</span> <span class="ss">:central_corridor</span><span class="p">)</span>
</pre></div>
</td>
</tr></table></div>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="#what-you-should-see" title="Permalink to this headline">Â¶</a>
</h2>
<div class="highlight-console">
<div class="highlight"><pre><span class="gp">$</span> ruby ex41.rb

<span class="go">--------</span>
<span class="go">The Gothons of Planet Percal #25 have invaded your ship and destroyed</span>
<span class="go">your entire crew.  You are the last surviving member and your last</span>
<span class="go">mission is to get the neutron destruct bomb from the Weapons Armory,</span>
<span class="go">put it in the bridge, and blow the ship up after getting into an</span>
<span class="go">escape pod.</span>


<span class="go">You're running down the central corridor to the Weapons Armory when</span>
<span class="go">a Gothon jumps out, red scaly skin, dark grimy teeth, and evil clown costume</span>
<span class="go">flowing around his hate filled body.  He's blocking the door to the</span>
<span class="go">Armory and about to pull a weapon to blast you.</span>
<span class="gp">&gt;</span> dodge!
<span class="go">Like a world class boxer you dodge, weave, slip and slide right</span>
<span class="go">as the Gothon's blaster cranks a laser past your head.</span>
<span class="go">In the middle of your artful dodge your foot slips and you</span>
<span class="go">bang your head on the metal wall and pass out.</span>
<span class="go">You wake up shortly after only to die as the Gothon stomps on</span>
<span class="go">your head and eats you.</span>

<span class="go">--------</span>
<span class="go">Such a luser.</span>

<span class="gp">$</span> ruby ex41.rb

<span class="go">--------</span>
<span class="go">The Gothons of Planet Percal #25 have invaded your ship and destroyed</span>
<span class="go">your entire crew.  You are the last surviving member and your last</span>
<span class="go">mission is to get the neutron destruct bomb from the Weapons Armory,</span>
<span class="go">put it in the bridge, and blow the ship up after getting into an</span>
<span class="go">escape pod.</span>


<span class="go">You're running down the central corridor to the Weapons Armory when</span>
<span class="go">a Gothon jumps out, red scaly skin, dark grimy teeth, and evil clown costume</span>
<span class="go">flowing around his hate filled body.  He's blocking the door to the</span>
<span class="go">Armory and about to pull a weapon to blast you.</span>
<span class="gp">&gt;</span> tell a joke
<span class="go">Lucky for you they made you learn Gothon insults in the academy.</span>
<span class="go">You tell the one Gothon joke you know:</span>
<span class="go">Lbhe zbgure vf fb sng, jura fur fvgf nebhaq gur ubhfr, fur fvgf nebhaq gur ubhfr.</span>
<span class="go">The Gothon stops, tries not to laugh, then busts out laughing and can't move.</span>
<span class="go">While he's laughing you run up and shoot him square in the head</span>
<span class="go">putting him down, then jump through the Weapon Armory door.</span>

<span class="go">--------</span>
<span class="go">You do a dive roll into the Weapon Armory, crouch and scan the room</span>
<span class="go">for more Gothons that might be hiding.  It's dead quiet, too quiet.</span>
<span class="go">You stand up and run to the far side of the room and find the</span>
<span class="go">neutron bomb in its container.  There's a keypad lock on the box</span>
<span class="go">and you need the code to get the bomb out.  If you get the code</span>
<span class="go">wrong 10 times then the lock closes forever and you can't</span>
<span class="go">get the bomb.  The code is 3 digits.</span>
<span class="go">[keypad]&gt; 123</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 234</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 345</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 456</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 567</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 678</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 789</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 384</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 764</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 354</span>
<span class="go">BZZZZEDDD!</span>
<span class="go">[keypad]&gt; 263</span>
<span class="go">The lock buzzes one last time and then you hear a sickening</span>
<span class="go">melting sound as the mechanism is fused together.</span>
<span class="go">You decide to sit there, and finally the Gothons blow up the</span>
<span class="go">ship from their ship and you die.</span>

<span class="go">--------</span>
<span class="go">You died.  You kinda suck at this.</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="#extra-credit" title="Permalink to this headline">Â¶</a>
</h2>
<ol class="arabic simple">
<li>Explain how returning the next room works.</li>
<li>Add cheat codes to the game so you can get past the more difficult
rooms.</li>
<li>Instead of having each function print itself, learn about "here
document" strings.</li>
<li>Write the room description as here document strings, and change the
runner to use them.</li>
<li>Once you have here document strings as the room description, do you
need to have the function prompt even? Have the runner prompt the
user, and pass that in to each function. Your functions should just
be <tt class="docutils literal"><span class="pre">if-statements</span></tt> printing the result and returning the next room.</li>
<li>This is actually a small version of something called a "finite state
machine". Read about them. They might not make sense but try anyway.</li>
</ol>
</div>
</div>


          </div>