<div class="body">
            
  <div class="section" id="exercise-20-functions-and-files">
<h1>Exercise 20: Functions And Files<a class="headerlink" href="#exercise-20-functions-and-files" title="Permalink to this headline">¶</a>
</h1>
<p>Remember your checklist for functions, then do this exercise paying
close attention to how functions and files can work together to make
useful stuff.</p>
<div class="highlight-ruby"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">input_file</span> <span class="o">=</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>

<span class="k">def</span> <span class="nf">print_all</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">rewind</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
  <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="no">IO</span><span class="o">::</span><span class="no">SEEK_SET</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">print_a_line</span><span class="p">(</span><span class="n">line_count</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">line_count</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="n">current_file</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"First let's print the whole file:"</span>
<span class="nb">puts</span> <span class="c1"># a blank line</span>

<span class="n">print_all</span><span class="p">(</span><span class="n">current_file</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"Now let's rewind, kind of like a tape."</span>

<span class="n">rewind</span><span class="p">(</span><span class="n">current_file</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"Let's print three lines:"</span>

<span class="n">current_line</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">print_a_line</span><span class="p">(</span><span class="n">current_line</span><span class="p">,</span> <span class="n">current_file</span><span class="p">)</span>

<span class="n">current_line</span> <span class="o">=</span> <span class="n">current_line</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">print_a_line</span><span class="p">(</span><span class="n">current_line</span><span class="p">,</span> <span class="n">current_file</span><span class="p">)</span>

<span class="n">current_line</span> <span class="o">=</span> <span class="n">current_line</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">print_a_line</span><span class="p">(</span><span class="n">current_line</span><span class="p">,</span> <span class="n">current_file</span><span class="p">)</span>
</pre></div>
</td>
</tr></table></div>
<p>Pay close attention to how we pass in the current line number each time
we run <tt class="docutils literal"><span class="pre">print_a_line</span></tt>.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="#what-you-should-see" title="Permalink to this headline">¶</a>
</h2>
<div class="highlight-console">
<div class="highlight"><pre><span class="gp">$</span> ruby ex20.rb test.txt
<span class="go">First let's print the whole file:</span>

<span class="go">To all the people out there.</span>
<span class="go">I say I don't like my hair.</span>
<span class="go">I need to shave it off.</span>

<span class="go">Now let's rewind, kind of like a tape.</span>
<span class="go">Let's print three lines:</span>
<span class="go">1 To all the people out there.</span>
<span class="go">2 I say I don't like my hair.</span>
<span class="go">3 I need to shave it off.</span>

<span class="gp">$</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="#extra-credit" title="Permalink to this headline">¶</a>
</h2>
<ol class="arabic simple">
<li>Go through and write English comments for each line to understand
what's going on.</li>
<li>Each time <tt class="docutils literal"><span class="pre">print_a_line</span></tt> is run you are passing in a variable
<tt class="docutils literal"><span class="pre">current_line</span></tt>. Write out what <tt class="docutils literal"><span class="pre">current_line</span></tt> is equal to on each
function call, and trace how it becomes <tt class="docutils literal"><span class="pre">line_count</span></tt> in
<tt class="docutils literal"><span class="pre">print_a_line</span></tt>.</li>
<li>Find each place a function is used, and go check its def to make sure
that you are giving it the right arguments.</li>
<li>Research online what the <tt class="docutils literal"><span class="pre">seek</span></tt> function for file does. Look at the
<tt class="docutils literal"><span class="pre">rdoc</span></tt> documentation using the <tt class="docutils literal"><span class="pre">ri</span></tt> command and see if you can
figure it out from there.</li>
<li>Research the shorthand notation <tt class="docutils literal"><span class="pre">+=</span></tt> and rewrite the script to use
that.</li>
</ol>
</div>
</div>


          </div>