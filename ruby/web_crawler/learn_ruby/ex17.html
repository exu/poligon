<div class="body">
            
  <div class="section" id="exercise-17-more-files">
<h1>Exercise 17: More Files<a class="headerlink" href="#exercise-17-more-files" title="Permalink to this headline">¶</a>
</h1>
<p>Now let's do a few more things with files. We're going to actually write
a Ruby script to copy one file to another. It'll be very short but will
give you some ideas about other things you can do with files.</p>
<div class="highlight-ruby"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">from_file</span><span class="p">,</span> <span class="n">to_file</span> <span class="o">=</span> <span class="no">ARGV</span> 
<span class="n">script</span> <span class="o">=</span> <span class="vg">$0</span>

<span class="nb">puts</span> <span class="s2">"Copying from </span><span class="si">#{</span><span class="n">from_file</span><span class="si">}</span><span class="s2"> to </span><span class="si">#{</span><span class="n">to_file</span><span class="si">}</span><span class="s2">"</span>

<span class="c1"># we could do these two on one line too, how?</span>
<span class="n">input</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">from_file</span><span class="p">)</span>
<span class="n">indata</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="nb">puts</span> <span class="s2">"The input file is </span><span class="si">#{</span><span class="n">indata</span><span class="o">.</span><span class="n">length</span><span class="si">}</span><span class="s2"> bytes long"</span>

<span class="nb">puts</span> <span class="s2">"Does the output file exist? </span><span class="si">#{</span><span class="no">File</span><span class="o">.</span><span class="n">exists?</span> <span class="n">to_file</span><span class="si">}</span><span class="s2">"</span>
<span class="nb">puts</span> <span class="s2">"Ready, hit RETURN to continue, CTRL-C to abort."</span>
<span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span>

<span class="n">output</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">to_file</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span>
<span class="n">output</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">indata</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"Alright, all done."</span>

<span class="n">output</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">input</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td>
</tr></table></div>
<p>Here we used a new method called <tt class="docutils literal"><span class="pre">File.exists?</span></tt>. This returns <strong>true</strong>
if a file exists, based on its name in a string as an argument. It
returns <strong>false</strong> if not. We'll be using this function in the second
half of this book to do lots of things.</p>
<div class="section" id="what-you-should-see">
<h2>What You Should See<a class="headerlink" href="#what-you-should-see" title="Permalink to this headline">¶</a>
</h2>
<p>Just like your other scripts, run this one with two arguments, the file
to copy from and the file to copy it to. If we use your <tt class="docutils literal"><span class="pre">test.txt</span></tt>
file from before we get this:</p>
<div class="highlight-console">
<div class="highlight"><pre><span class="gp">$</span> ruby ex17.rb test.txt copied.txt
<span class="go">Copying from test.txt to copied.txt</span>
<span class="go">The input file is 81 bytes long</span>
<span class="go">Does the output file exist? False</span>
<span class="go">Ready, hit RETURN to continue, CTRL-C to abort.</span>

<span class="go">Alright, all done.</span>

<span class="gp">$</span> cat copied.txt
<span class="go">To all the people out there.</span>
<span class="go">I say I don't like my hair.</span>
<span class="go">I need to shave it off.</span>
<span class="gp">$</span>
</pre></div>
</div>
<p>It should work with any file. Try a bunch more and see what happens.
Just be careful you do not blast an important file.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Did you see that trick I did with <tt class="docutils literal"><span class="pre">cat</span></tt>? It only
works on Linux or OSX, on Windows use <tt class="docutils literal"><span class="pre">type</span></tt> to do the same thing.</p>
</div>
</div>
<div class="section" id="extra-credit">
<h2>Extra Credit<a class="headerlink" href="#extra-credit" title="Permalink to this headline">¶</a>
</h2>
<ol class="arabic simple">
<li>Go read up on Ruby's <tt class="docutils literal"><span class="pre">require</span></tt> statement, and start Ruby to try it
out. Try importing some things and see if you can get it right. It's
alright if you do not.</li>
<li>This script is really annoying. There's no need to ask you before
doing the copy, and it prints too much out to the screen. Try to make
it more friendly to use by removing features.</li>
<li>See how short you can make the script. I could make this 1 line long.</li>
<li>Notice at the end of the WYSS I used something called <tt class="docutils literal"><span class="pre">cat</span></tt>? It's
an old command that "con*cat*enates" files together, but mostly it's
just an easy way to print a file to the screen. Type <tt class="docutils literal"><span class="pre">man</span> <span class="pre">cat</span></tt> to
read about it.</li>
<li>Windows people, find the alternative to <tt class="docutils literal"><span class="pre">cat</span></tt> that Linux/OSX people
have. Do not worry about <tt class="docutils literal"><span class="pre">man</span></tt> since there is nothing like that.</li>
<li>Find out why you had to do <tt class="docutils literal"><span class="pre">output.close()</span></tt> in the code.</li>
</ol>
</div>
</div>


          </div>